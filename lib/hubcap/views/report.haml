!!!
%html
  %head
    %title Hubcap
    %link{:type => "text/css", :rel => "stylesheet", :href => "stylesheets/style-report.css"}
    %script{:type => "text/javascript", :src => "javascripts/protovis-r3.2.js"}
    %script{:type => "text/javascript"}="var data = #{@repos.with_participation.to_json};"
      
  %body
    #headings
      %h1 Hubcap
      %h2 A visual recap of your GitHub commits
      - info  = "52 week owner commits for <a href=\"https://github.com/#{params['login']}/\">#{params['login']}</a>'s repostories"
      - info += ", covering the #{@repos.with_participation.count} repositories pushed in the last #{@repos.weeks_of_full_data} weeks"
      - info += ", excluding the #{@repos.without_participation.count} repositories last pushed previously" if @repos.without_participation.count > 0
      - info += "."
      %p.info= info

    #chart
      %script{:type => "text/javascript", :src => "javascripts/chart.js"}

    .repolist
      %table
        - @repos.with_participation.by_last_pushed_desc.each do |repo|
          %tr
            %td
              %span.colorbox{:style => "background-color: #{repo['color']}"}
            %td
              %a{:href => "https://github.com/#{params['login']}/#{repo['name']}"}= "#{repo['name']}"
